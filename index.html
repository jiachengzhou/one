<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥³ç¥èŠ‚å¿«ä¹ Â· ç’€ç’¨äº¤äº’ç‰ˆ</title>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Zhi+Mang+Xing&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ff4d6d;
            --secondary-color: #ff8fa3;
            --gold: #ffd700;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: radial-gradient(circle at center, #1a0b14 0%, #000000 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            color: #fff;
            perspective: 1000px; /* å¼€å¯3Dé€è§† */
            font-family: 'Ma Shan Zheng', cursive;
            cursor: pointer; /* æç¤ºå¯ç‚¹å‡» */
        }

        /* ç»Ÿä¸€ç”»å¸ƒå±‚ */
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none; /* è®©é¼ æ ‡äº‹ä»¶ç©¿é€åˆ°ä¸‹å±‚ï¼Œæˆ–è€…ç”±JSç»Ÿä¸€æ¥ç®¡ */
        }

        /* 3D å®¹å™¨ */
        .card-container {
            position: relative;
            z-index: 10;
            transform-style: preserve-3d;
            text-align: center;
            transition: transform 0.1s ease-out; /* å¹³æ»‘è·Ÿéš */
            pointer-events: none; /* è®©å†…éƒ¨å…ƒç´ å¯ç‚¹å‡» */
        }

        /* å†…éƒ¨å¯ç‚¹å‡»åŒºåŸŸ */
        .interactive-area {
            pointer-events: auto;
            display: inline-block;
        }

        /* æ°´æ™¶ç«ç‘° */
        .rose-wrapper {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            transform-style: preserve-3d;
            animation: float 6s ease-in-out infinite;
        }

        .petal {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.9), var(--primary-color));
            border-radius: 50% 0 50% 50%;
            box-shadow: 0 0 15px var(--primary-color);
            transform-origin: bottom center;
            opacity: 0.9;
            mix-blend-mode: hard-light;
        }

        /* èŠ±ç“£èºæ—‹æ’åˆ— */
        .petal:nth-child(1) { transform: rotateY(0deg) rotateX(45deg) translateZ(10px); }
        .petal:nth-child(2) { transform: rotateY(60deg) rotateX(45deg) translateZ(10px); }
        .petal:nth-child(3) { transform: rotateY(120deg) rotateX(45deg) translateZ(10px); }
        .petal:nth-child(4) { transform: rotateY(180deg) rotateX(45deg) translateZ(10px); }
        .petal:nth-child(5) { transform: rotateY(240deg) rotateX(45deg) translateZ(10px); }
        .petal:nth-child(6) { transform: rotateY(300deg) rotateX(45deg) translateZ(10px); }
        /* å†…éƒ¨èŠ±èŠ¯ */
        .petal:nth-child(7) { transform: rotateY(30deg) rotateX(60deg) scale(0.6) translateZ(20px); background: #fff0f5; }
        .petal:nth-child(8) { transform: rotateY(90deg) rotateX(60deg) scale(0.6) translateZ(20px); background: #fff0f5; }
        .petal:nth-child(9) { transform: rotateY(210deg) rotateX(60deg) scale(0.6) translateZ(20px); background: #fff0f5; }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotateZ(0); }
            50% { transform: translateY(-20px) rotateZ(5deg); }
        }

        /* æ ‡é¢˜æ ·å¼ */
        .main-title {
            font-size: 6rem;
            margin: 0;
            background: linear-gradient(135deg, #fff 30%, #ff8fa3 50%, #fff 70%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 10px 30px rgba(255, 77, 109, 0.6);
            animation: shine 3s linear infinite;
            cursor: pointer;
            user-select: none;
            transition: transform 0.2s;
        }
        
        .main-title:active {
            transform: scale(0.95);
        }

        .sub-title {
            font-family: 'Zhi Mang Xing', cursive;
            font-size: 2.2rem;
            color: #ffd700;
            margin-top: 10px;
            opacity: 0.9;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .hint {
            margin-top: 40px;
            font-size: 1rem;
            color: rgba(255,255,255,0.4);
            font-family: sans-serif;
            letter-spacing: 2px;
        }

        @keyframes shine {
            to { background-position: 200% center; }
        }

        /* æ‰‹æœºç«¯é€‚é… */
        @media (max-width: 768px) {
            .main-title { font-size: 3.5rem; }
            .sub-title { font-size: 1.5rem; }
            .rose-wrapper { width: 80px; height: 80px; }
        }
    </style>
</head>
<body>

    <canvas id="fxCanvas"></canvas>

    <div class="card-container" id="card">
        <div class="interactive-area">
            <div class="rose-wrapper">
                <div class="petal"></div>
                <div class="petal"></div>
                <div class="petal"></div>
                <div class="petal"></div>
                <div class="petal"></div>
                <div class="petal"></div>
                <div class="petal"></div>
                <div class="petal"></div>
                <div class="petal"></div>
            </div>
            <h1 class="main-title" id="title-text">å¦‡å¥³èŠ‚å¿«ä¹</h1>
            <div class="sub-title" id="sub-text">æ„¿ä½ çœ¼é‡Œæœ‰å…‰ï¼Œå¿ƒä¸­æœ‰çˆ±</div>
            <div class="hint">ğŸ–±ï¸ ç‚¹å‡»å±å¹•ç»½æ”¾çˆ±å¿ƒçƒŸèŠ± Â· ç‚¹å‡»æ–‡å­—åˆ‡æ¢ç¥ç¦</div>
        </div>
    </div>

    <script>
        /**
         * å…¨å±€é…ç½®ä¸åˆå§‹åŒ–
         */
        const canvas = document.getElementById('fxCanvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let particles = [];
        let fireworks = [];
        let stars = [];
        
        // ç¥ç¦è¯­æ–‡æ¡ˆæ± 
        const greetings = [
            { t: "å¦‡å¥³èŠ‚å¿«ä¹", s: "æ„¿ä½ çœ¼é‡Œæœ‰å…‰ï¼Œå¿ƒä¸­æœ‰çˆ±" },
            { t: "å¥³ç¥ä¸‡å²", s: "ä¸è¢«å®šä¹‰ï¼Œåªåšè‡ªå·±" },
            { t: "æ°¸è¿œåå…«", s: "èŠ³åè‡ªåœ¨ï¼Œç¬‘é¥å¦‚èŠ±" },
            { t: "å…‰èŠ’ä¸‡ä¸ˆ", s: "ä¹˜é£ç ´æµªï¼Œå…‰èŠ’ä¸‡ä¸ˆ" },
            { t: "æ¸©æŸ”æœ‰åŠ›", s: "ä¸–ç•Œå› ä½ è€Œç¾ä¸½" }
        ];
        let greetingIndex = 0;

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        /**
         * äº¤äº’é€»è¾‘ï¼šæ–‡å­—åˆ‡æ¢
         */
        const titleEl = document.getElementById('title-text');
        const subEl = document.getElementById('sub-text');
        
        titleEl.addEventListener('click', (e) => {
            e.stopPropagation(); // é˜²æ­¢è§¦å‘çƒŸèŠ±
            greetingIndex = (greetingIndex + 1) % greetings.length;
            
            // ç®€å•çš„æ·¡å…¥æ·¡å‡ºæ•ˆæœ
            titleEl.style.opacity = 0;
            subEl.style.opacity = 0;
            
            setTimeout(() => {
                titleEl.innerText = greetings[greetingIndex].t;
                subEl.innerText = greetings[greetingIndex].s;
                titleEl.style.opacity = 1;
                subEl.style.opacity = 1;
                
                // åˆ‡æ¢æ—¶äº§ç”Ÿä¸€äº›é‡‘è‰²ç²’å­
                createBurst(width/2, height/2, '#ffd700', 30);
            }, 200);
        });

        /**
         * äº¤äº’é€»è¾‘ï¼š3D è§†å·® (Parallax)
         */
        const card = document.getElementById('card');
        document.addEventListener('mousemove', (e) => {
            // é¼ æ ‡ä½ç½®ç›¸å¯¹äºå±å¹•ä¸­å¿ƒçš„ç™¾åˆ†æ¯”
            const x = (e.clientX / width - 0.5) * 2; // -1 to 1
            const y = (e.clientY / height - 0.5) * 2; // -1 to 1
            
            // æ—‹è½¬è§’åº¦é™åˆ¶
            const rotateY = x * 20; // å·¦å³æ—‹è½¬
            const rotateX = -y * 20; // ä¸Šä¸‹æ—‹è½¬
            
            card.style.transform = `rotateY(${rotateY}deg) rotateX(${rotateX}deg)`;
            
            // é¼ æ ‡ç§»åŠ¨äº§ç”Ÿä»™å¥³æ£’æ•ˆæœ
            if(Math.random() > 0.5) {
                createSparkle(e.clientX, e.clientY);
            }
        });

        /**
         * ç²’å­ç³»ç»Ÿç±»å®šä¹‰
         */
        class Particle {
            constructor(x, y, color, velocity, life) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.vx = velocity.x;
                this.vy = velocity.y;
                this.life = life;
                this.maxLife = life;
                this.gravity = 0.05;
                this.friction = 0.98;
                this.size = Math.random() * 2 + 1;
            }
            update() {
                this.vx *= this.friction;
                this.vy *= this.friction;
                this.vy += this.gravity;
                this.x += this.vx;
                this.y += this.vy;
                this.life--;
            }
            draw() {
                ctx.globalAlpha = this.life / this.maxLife;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1;
            }
        }

        // é¼ æ ‡æ‹–å°¾ç²’å­ï¼ˆæ— é‡åŠ›ï¼Œæ¼‚æµ®ï¼‰
        class Sparkle extends Particle {
            constructor(x, y) {
                super(x, y, `hsl(${Math.random()*50 + 320}, 100%, 80%)`, {x: (Math.random()-0.5), y: (Math.random()-0.5)}, 40);
                this.gravity = -0.02; // å‘ä¸Šé£˜
                this.size = Math.random() * 3;
            }
        }

        // æµæ˜Ÿ
        class ShootingStar {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * width;
                this.y = Math.random() * height * 0.5;
                this.len = Math.random() * 80 + 10;
                this.speed = Math.random() * 10 + 6;
                this.size = Math.random() * 1 + 0.1;
                // æµæ˜Ÿåˆ’è¿‡ 45åº¦è§’
                this.vx = -this.speed; 
                this.vy = this.speed; 
                this.life = 0; // å»¶è¿Ÿå‘å°„
                this.active = false;
            }
            update() {
                if (!this.active) {
                    if (Math.random() < 0.005) this.active = true;
                    return;
                }
                this.x += this.vx;
                this.y += this.vy;
                if (this.x < 0 || this.y > height) this.reset();
            }
            draw() {
                if (!this.active) return;
                ctx.strokeStyle = "rgba(255, 255, 255, 0.5)";
                ctx.lineWidth = this.size;
                ctx.beginPath();
                ctx.moveTo(this.x, this.y);
                ctx.lineTo(this.x - this.vx*2, this.y - this.vy*2); // å°¾å·´
                ctx.stroke();
            }
        }

        /**
         * åŠŸèƒ½å‡½æ•°ï¼šç”Ÿæˆå¿ƒå½¢çˆ†ç‚¸
         */
        function createHeartExplosion(x, y) {
            const particleCount = 150;
            const hue = Math.floor(Math.random() * 60) + 330; // åçº¢ç²‰è‰²
            
            for (let i = 0; i < particleCount; i++) {
                // å¿ƒå½¢å…¬å¼ (t from 0 to 2PI)
                // x = 16sin^3(t)
                // y = 13cos(t) - 5cos(2t) - 2cos(3t) - cos(4t)
                const t = (Math.PI * 2 * i) / particleCount;
                
                // è®¡ç®—å•ä½å‘é‡æ–¹å‘ï¼Œä½†ä¿ç•™å¿ƒå½¢çš„æ¯”ä¾‹
                let dx = 16 * Math.pow(Math.sin(t), 3);
                let dy = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t)); // è´Ÿå·å› ä¸ºCanvas Yè½´å‘ä¸‹
                
                // ç¼©æ”¾é€Ÿåº¦
                const power = Math.random() * 0.5 + 0.1; // éšæœºåŠ›åº¦å¢åŠ å±‚æ¬¡æ„Ÿ
                const vx = dx * power;
                const vy = dy * power;

                particles.push(new Particle(x, y, `hsl(${hue}, 100%, 60%)`, {x: vx, y: vy}, 100 + Math.random()*50));
            }
            
            // åŒæ—¶åŠ ä¸€ç‚¹é—ªå…‰ç‚¹ç¼€
            createBurst(x, y, '#fff', 20);
        }

        function createBurst(x, y, color, count) {
            for(let i=0; i<count; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 3;
                particles.push(new Particle(x, y, color, {x: Math.cos(angle)*speed, y: Math.sin(angle)*speed}, 50));
            }
        }

        function createSparkle(x, y) {
            particles.push(new Sparkle(x, y));
        }

        /**
         * é¼ æ ‡ç‚¹å‡»äº‹ä»¶ï¼šè§¦å‘å¿ƒå½¢çƒŸèŠ±
         */
        document.addEventListener('mousedown', (e) => {
            // å¦‚æœç‚¹çš„æ˜¯æ–‡å­—åŒºåŸŸï¼Œä¸è¦è§¦å‘çƒŸèŠ±ï¼ˆå·²åœ¨æ–‡å­—äº‹ä»¶å¤„ç†ï¼‰
            // è¿™é‡Œç®€å•å¤„ç†ï¼šç›´æ¥å…¨å±è§¦å‘ï¼Œè§†è§‰æ•ˆæœæ›´å¥½ï¼Œæ–‡å­—ç‚¹å‡»äº‹ä»¶ä¼šå…ˆæ‰§è¡Œ
            createHeartExplosion(e.clientX, e.clientY);
        });

        // åˆå§‹åŒ–æµæ˜Ÿ
        for(let i=0; i<3; i++) stars.push(new ShootingStar());

        /**
         * åŠ¨ç”»ä¸»å¾ªç¯
         */
        function animate() {
            // èƒŒæ™¯è½»å¾®æ‹–å°¾ï¼Œåˆ¶é€ åŠ¨æ€æ¨¡ç³Šæ„Ÿ
            ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
            ctx.fillRect(0, 0, width, height);

            // æ›´æ–°ç»˜åˆ¶ç²’å­
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.update();
                p.draw();
                if (p.life <= 0) particles.splice(i, 1);
            }

            // æ›´æ–°æµæ˜Ÿ
            stars.forEach(star => {
                star.update();
                star.draw();
            });

            requestAnimationFrame(animate);
        }

        animate();
        
        // è‡ªåŠ¨ç‡ƒæ”¾å‡ ä¸ªçƒŸèŠ±ä½œä¸ºå¼€åœº
        setTimeout(() => createHeartExplosion(width*0.2, height*0.3), 500);
        setTimeout(() => createHeartExplosion(width*0.8, height*0.3), 1200);
        setTimeout(() => createHeartExplosion(width*0.5, height*0.2), 2000);

    </script>
</body>
</html>
